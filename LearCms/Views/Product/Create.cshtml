@model LearCms.ViewModels.ProductCreateViewModel

@{
    ViewData["Title"] = "Create Product";
}

<div class="max-w-3xl mx-auto mt-12 p-6 bg-white dark:bg-gray-800 shadow-lg rounded-2xl">
    <h1 class="text-3xl font-bold text-center text-gray-900 dark:text-white mb-2">Create Product</h1>
    <h4 class="text-center text-gray-600 dark:text-gray-300 mb-6">Add a new product to your catalog</h4>

    <form asp-action="Create" enctype="multipart/form-data" id="createForm" class="space-y-6">
        <div asp-validation-summary="ModelOnly" class="text-red-600 dark:text-red-400 text-sm"></div>

        <!-- Product Name -->
        <div>
            <label asp-for="Name" class="block text-gray-700 dark:text-gray-300 font-semibold mb-1">Product Name</label>
            <input asp-for="Name"
                   class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                   placeholder="Enter product name" />
            <span asp-validation-for="Name" class="text-red-600 dark:text-red-400 text-sm mt-1 block"></span>
        </div>

        <!-- Description -->
        <div>
            <label asp-for="Description" class="block text-gray-700 dark:text-gray-300 font-semibold mb-1">Description</label>
            <input asp-for="Description"
                   class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                   placeholder="Enter product description" />
            <span asp-validation-for="Description" class="text-red-600 dark:text-red-400 text-sm mt-1 block"></span>
        </div>

        <!-- Price -->
        <div>
            <label asp-for="Price" class="block text-gray-700 dark:text-gray-300 font-semibold mb-1">Price</label>
            <input asp-for="Price" type="number" step="0.01"
                   class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                   placeholder="0.00" />
            <span asp-validation-for="Price" class="text-red-600 dark:text-red-400 text-sm mt-1 block"></span>
        </div>

        <!-- Stock -->
        <div>
            <label asp-for="Stock" class="block text-gray-700 dark:text-gray-300 font-semibold mb-1">Stock Quantity</label>
            <input asp-for="Stock" type="number"
                   class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                   placeholder="0" />
            <span asp-validation-for="Stock" class="text-red-600 dark:text-red-400 text-sm mt-1 block"></span>
        </div>

        <!-- Image -->
        <div>
            <label asp-for="ImageFile" class="block text-gray-700 dark:text-gray-300 font-semibold mb-1">Product Image</label>
            <input asp-for="ImageFile" type="file" accept="image/*"
                   class="w-full border rounded-lg px-3 py-2 dark:bg-gray-700 dark:text-white" />
            <span asp-validation-for="ImageFile" class="text-red-600 dark:text-red-400 text-sm mt-1 block"></span>
            <small class="text-gray-500 dark:text-gray-400 text-sm">
                Supported formats: JPG, PNG, GIF. Max size: 5MB
            </small>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
            <button type="submit"
                    class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow transition-all">
                Create Product
            </button>
        </div>
    </form>

    <div class="mt-6 text-center">
        <a asp-action="Index"
           class="px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold rounded-lg shadow transition">
            ← Back to List
        </a>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        // Mejora la experiencia del formulario
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('createForm');
            const submitBtn = form.querySelector('button[type="submit"]');

            form.addEventListener('submit', function() {
                submitBtn.classList.add('loading');
                submitBtn.disabled = true;
            });

            // Validación en tiempo real mejorada
            const inputs = form.querySelectorAll('.form-control');
            inputs.forEach(input => {
                input.addEventListener('blur', function() {
                    this.classList.remove('is-valid', 'is-invalid');

                    if (this.value.trim() !== '') {
                        if (this.checkValidity()) {
                            this.classList.add('is-valid');
                        } else {
                            this.classList.add('is-invalid');
                        }
                    }
                });
            });
        });
    </script>
}